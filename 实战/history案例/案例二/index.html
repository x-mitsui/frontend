<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <input type="text" placeholder="请输入要过滤的信息" class='input-el'><button class='filterBtn'>开始过滤</button>

  <ul class='list'>

  </ul>
  <script>
    const data = [
      { name: "css" },
      { name: "typescript" },
      { name: "javascript" },
      { name: "java" },
      { name: "html" },
      { name: "c++" },
    ];
    const listEl = document.getElementsByClassName("list")[0];
    const filterBtn = document.getElementsByClassName("filterBtn")[0];
    const inputEl = document.getElementsByClassName("input-el")[0]
    function renderDom(data) {
      let htmlStr = ''
      data.forEach(item => {
        let str = `<li>${item.name}</li>`
        htmlStr += str
      })
      listEl.innerHTML = htmlStr
    }
    renderDom(data);
    function showData(filterStr) {
      const newData = data.filter((item, index, arr) => {
        return item.name.indexOf(filterStr) != -1;
      })
      renderDom(newData);
    }
    filterBtn.addEventListener("click", function (el) {
      showData(inputEl.value)
      history.pushState({ 'path': inputEl.value }, null, "#" + inputEl.value);
    })

    window.addEventListener("popstate", function (el) {
      if (el.state) {
        const info = el.state.path;
        inputEl.value = info
        showData(info);
      } else {
        // 首页的话就恢复初始化
        inputEl.value = '';
        renderDom(data);
      }

    })

  </script>
</body>

</html>